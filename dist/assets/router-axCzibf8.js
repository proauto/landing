class g{constructor(){this.routes=new Map,this.currentRoute=null,this.initialized=!1,this.basePath=this.getBasePath()}getBasePath(){return window.location.pathname.includes("/landing/")?"/landing":""}normalizePathForRouting(t){return this.basePath&&t.startsWith(this.basePath)&&(t=t.substring(this.basePath.length)),t.startsWith("/")||(t="/"+t),t==="/"?"/":t}getFullPath(t){return this.basePath+t}init(){if(this.initialized)return;console.log("Router initialized with",this.routes.size,"routes"),window.addEventListener("popstate",e=>{const o=this.normalizePathForRouting(window.location.pathname);this.handleRoute(o)});const t=this.normalizePathForRouting(window.location.pathname);console.log("Initial route:",window.location.pathname,"-> normalized:",t),this.handleRoute(t),this.initialized=!0}addRoute(t,e){this.routes.set(t,e)}navigate(t){if(console.log("Navigating to:",t,"from:",this.currentRoute),this.currentRoute!==t||t==="/"){const e=this.getFullPath(t);history.pushState(null,"",e),this.handleRoute(t)}else t==="/"&&this.handleRoute(t)}handleRoute(t){if(console.log("Handling route:",t),t==="/"){let o=this.routes.get("/");if(o){this.currentRoute="/",this.renderComponent(o,this.currentRoute),this.updateNavigation(this.currentRoute);return}}let e=this.routes.get(t);if(e)this.currentRoute=t;else if(console.log("Route not found:",t,"Available routes:",Array.from(this.routes.keys())),e=this.routes.get("/"),e){this.currentRoute="/";const o=this.getFullPath("/");history.replaceState(null,"",o)}e?(this.renderComponent(e,this.currentRoute),this.updateNavigation(this.currentRoute)):console.error("No home route found! Available routes:",Array.from(this.routes.keys()))}renderComponent(t,e){const o=document.getElementById("main-content");o&&(o.innerHTML=t(),this.executeComponentScripts(e),this.updatePageMetadata(e))}updateNavigation(t){document.querySelectorAll(".nav-item").forEach(o=>{o.classList.remove("current-page");const i=o.getAttribute("data-path");(i===t||t==="/"&&i==="/")&&o.classList.add("current-page")})}updatePageMetadata(t){const e={"/":{title:"PreVIT - 아이디어를 서비스로",description:"아이디어로만 끝났던 일, 프레빗이 서비스로 만듭니다. 작고 사소하지만 꼭 필요했던 생각을 우리는 AI로 빠르게 구현합니다.",ogUrl:"https://previtlab.com"},"/brand":{title:"BRAND - PreVIT",description:"PreVIT LAB - Prepare Your Vision with IT",ogUrl:"https://previtlab.com/brand"},"/product":{title:"PRODUCT - PreVIT",description:"PreVIT의 제품 및 서비스",ogUrl:"https://previtlab.com/product"},"/blog":{title:"BLOG - PreVIT",description:"PreVIT의 블로그 - 운전, 임신출산 관련 유용한 정보와 팁",ogUrl:"https://previtlab.com/blog"}},o=e[t]||e["/"];document.title=o.title,this.updateMetaTag("description",o.description),this.updateMetaTag("og:title",o.title,"property"),this.updateMetaTag("og:description",o.description,"property"),this.updateMetaTag("og:url",o.ogUrl,"property"),this.updateMetaTag("twitter:title",o.title),this.updateMetaTag("twitter:description",o.description)}updateMetaTag(t,e,o="name"){let i=document.querySelector(`meta[${o}="${t}"]`);i&&i.setAttribute("content",e)}executeComponentScripts(t){switch(t){case"/blog":this.initBlogScripts();break;case"/":this.initHomeScripts();break}}initBlogScripts(){const t=document.getElementById("blogSearch"),e=document.querySelectorAll(".category-btn"),o=document.querySelectorAll(".blog-post"),i=document.getElementById("loadMoreBtn");if(!t)return;let n="all",r="";t.addEventListener("input",s=>{r=s.target.value.toLowerCase(),this.filterPosts(o,n,r)}),e.forEach(s=>{s.addEventListener("click",l=>{e.forEach(c=>c.classList.remove("active")),l.target.classList.add("active"),n=l.target.dataset.category,this.filterPosts(o,n,r)})}),i&&i.addEventListener("click",()=>{alert("더 많은 글을 불러오는 기능은 추후 구현 예정입니다.")})}filterPosts(t,e,o){t.forEach(i=>{var u,d;const n=i.dataset.category,r=((u=i.querySelector(".post-title"))==null?void 0:u.textContent.toLowerCase())||"",s=((d=i.querySelector(".post-excerpt"))==null?void 0:d.textContent.toLowerCase())||"",l=e==="all"||n===e,c=o===""||r.includes(o)||s.includes(o);l&&c?i.style.display="block":i.style.display="none"})}initHomeScripts(){document.querySelector(".contact-form")}}document.addEventListener("click",a=>{console.log("Click event detected on:",a.target,"Router available:",!!window.router);const t=a.target.matches("a[data-path]")?a.target:a.target.closest("a[data-path]");if(t){console.log("Found element with data-path:",t),a.preventDefault(),a.stopPropagation();const e=t.getAttribute("data-path");console.log("Navigating to path:",e,"Router ready:",!!window.router),window.router&&e?(console.log("Calling router.navigate with path:",e),window.router.navigate(e)):window.router||(console.warn("Router not available yet, storing path for later:",e),window.pendingNavigation=e,setTimeout(()=>{window.router&&window.pendingNavigation&&(console.log("Router now available, navigating to stored path:",window.pendingNavigation),window.router.navigate(window.pendingNavigation),delete window.pendingNavigation)},100))}},!0);export{g as default};
